# PDF 페이지 분할 서비스 PRD

## 1. 프로젝트 개요

### 1.1 목적
PDF 파일을 업로드하면 각 페이지를 독립적인 PDF 파일로 분할하여 개별 다운로드할 수 있는 웹 서비스

### 1.2 핵심 가치
- **개인정보 보호**: 모든 처리를 클라이언트에서 수행하여 서버에 파일이 저장되지 않음
- **빠른 처리**: 네트워크 지연 없이 즉시 처리
- **간편한 사용**: 드래그 앤 드롭으로 직관적인 UX

## 2. 기술 스택

### 2.1 프론트엔드
- **Next.js**: React 기반 프레임워크
- **Shadcn UI**: UI 컴포넌트 라이브러리
- **Tailwind CSS**: 스타일링
- **TypeScript**: 타입 안정성

### 2.2 핵심 라이브러리
- **pdf-lib**: PDF 파싱 및 페이지 분할 처리
- **react-dropzone**: 드래그 앤 드롭 파일 업로드

## 3. 기능 요구사항

### 3.1 파일 업로드
- **드래그 앤 드롭**: PDF 파일을 드래그하여 업로드 영역에 드롭
- **파일 선택**: 클릭하여 파일 선택 다이얼로그 열기
- **파일 검증**: PDF 파일만 허용, 다른 형식은 에러 메시지 표시
- **파일 크기 제한**: 브라우저 메모리 고려 (권장: 100MB 이하)

### 3.2 PDF 처리
- **페이지 추출**: 업로드된 PDF의 모든 페이지를 개별적으로 추출
- **페이지 수 표시**: 총 페이지 수 표시
- **처리 상태**: 진행 상황 표시 (선택사항)

### 3.3 다운로드
- **개별 다운로드**: 각 페이지를 클릭하여 개별 다운로드
- **일괄 다운로드**: 모든 페이지를 한 번에 다운로드 (선택사항)
- **파일명 규칙**: `원본파일명-page-{페이지번호}.pdf` 형식

### 3.4 UI/UX
- **단일 페이지**: URL 변경 없이 업로드 화면 → 결과 화면 전환
- **반응형 디자인**: 모바일/태블릿/데스크톱 지원
- **로딩 상태**: 처리 중 로딩 인디케이터 표시
- **에러 처리**: 에러 발생 시 사용자 친화적 메시지 표시

## 4. 화면 구성

### 4.1 업로드 화면
- 드래그 앤 드롭 영역 (Shadcn Card 컴포넌트)
- "파일 선택" 버튼
- 안내 문구 (예: "PDF 파일을 드래그하거나 클릭하여 업로드하세요")

### 4.2 결과 화면
- 원본 파일 정보 (파일명, 페이지 수)
- 페이지 목록 (썸네일 또는 페이지 번호)
- 각 페이지별 다운로드 버튼
- "새 파일 업로드" 버튼 (업로드 화면으로 복귀)

## 5. 기술적 제약사항

### 5.1 클라이언트 사이드 처리
- 모든 PDF 처리는 브라우저에서 수행
- 서버 API 호출 없음
- 파일은 서버에 업로드되지 않음

### 5.2 브라우저 제약
- 메모리 제한: 대용량 PDF 파일 처리 시 브라우저 메모리 부족 가능
- 호환성: 최신 브라우저 지원 (Chrome, Firefox, Safari, Edge)

## 6. 비기능 요구사항

### 6.1 성능
- 50페이지 이하 PDF: 5초 이내 처리
- 100페이지 이하 PDF: 10초 이내 처리

### 6.2 사용성
- 직관적인 UI/UX
- 명확한 에러 메시지
- 로딩 상태 피드백

### 6.3 접근성
- 키보드 네비게이션 지원
- 스크린 리더 호환 (선택사항)

## 7. 구현 우선순위 및 단계별 체크리스트

### Phase 0: 프로젝트 초기 설정
**목표**: 개발 환경 구축 및 기본 프로젝트 구조 생성

#### 작업 항목
- [ ] Next.js 프로젝트 초기화
- [ ] TypeScript 설정
- [ ] Tailwind CSS 설정
- [ ] Shadcn UI 초기화 및 설치
- [ ] 필요한 패키지 설치 (pdf-lib, react-dropzone)
- [ ] 기본 디렉토리 구조 생성

#### 테스트 방법
```bash
# 프로젝트 실행 확인
npm run dev
# 브라우저에서 http://localhost:3000 접속 시 빈 페이지 표시 확인
```

#### 체크리스트
- [ ] `npm install` 성공
- [ ] `npm run dev` 실행 성공
- [ ] 브라우저에서 기본 페이지 로드 확인
- [ ] TypeScript 컴파일 에러 없음

---

### Phase 1: 기본 UI 레이아웃 구성
**목표**: 업로드 화면의 기본 UI 구조 구현

#### 작업 항목
- [ ] 메인 페이지 레이아웃 생성
- [ ] 업로드 영역 UI 컴포넌트 생성 (Card 기반)
- [ ] 기본 스타일링 적용
- [ ] 반응형 레이아웃 구현

#### 테스트 방법
1. 브라우저에서 페이지 접속
2. 업로드 영역이 화면 중앙에 표시되는지 확인
3. 모바일/태블릿/데스크톱 화면 크기에서 레이아웃 확인

#### 체크리스트
- [ ] 업로드 영역이 화면에 표시됨
- [ ] 반응형 디자인이 정상 작동 (모바일/태블릿/데스크톱)
- [ ] 기본 스타일링 적용 완료
- [ ] Shadcn UI 컴포넌트 정상 렌더링

---

### Phase 2: 파일 업로드 기능 구현
**목표**: PDF 파일을 선택하고 읽을 수 있는 기능 구현

#### 작업 항목
- [ ] react-dropzone 설치 및 설정
- [ ] 드래그 앤 드롭 영역 구현
- [ ] 파일 선택 버튼 구현
- [ ] 파일 읽기 로직 구현 (FileReader/File API)
- [ ] 파일 타입 검증 (PDF만 허용)
- [ ] 파일 크기 검증 및 제한

#### 테스트 방법
1. **정상 케이스**:
   - PDF 파일을 드래그 앤 드롭 → 콘솔에 파일 정보 출력 확인
   - "파일 선택" 버튼 클릭 → PDF 파일 선택 → 콘솔에 파일 정보 출력 확인

2. **예외 케이스**:
   - 비PDF 파일 업로드 시도 → 에러 메시지 표시 확인
   - 100MB 이상 파일 업로드 시도 → 경고 메시지 표시 확인

#### 체크리스트
- [ ] PDF 파일 드래그 앤 드롭 작동
- [ ] 파일 선택 버튼으로 PDF 파일 선택 가능
- [ ] 비PDF 파일 업로드 시 에러 메시지 표시
- [ ] 파일 크기 제한 검증 작동
- [ ] 콘솔에 파일 정보 (이름, 크기) 정상 출력

---

### Phase 3: PDF 파싱 및 페이지 분할 로직 구현
**목표**: 업로드된 PDF를 파싱하고 각 페이지를 분리하는 핵심 로직 구현

#### 작업 항목
- [ ] pdf-lib을 사용한 PDF 로드 함수 구현
- [ ] PDF 페이지 수 추출
- [ ] 각 페이지를 개별 PDF로 분할하는 함수 구현
- [ ] 분할된 PDF를 메모리에 저장 (Blob 배열)
- [ ] 에러 처리 (손상된 PDF, 빈 PDF 등)

#### 테스트 방법
1. **정상 케이스**:
   - 1페이지 PDF 업로드 → 콘솔에 "1페이지 분할 완료" 메시지 확인
   - 5페이지 PDF 업로드 → 콘솔에 "5페이지 분할 완료" 메시지 확인
   - 분할된 PDF 배열이 정상 생성되었는지 확인

2. **예외 케이스**:
   - 손상된 PDF 업로드 → 에러 메시지 표시 확인
   - 빈 PDF 업로드 → 적절한 처리 확인

#### 체크리스트
- [ ] PDF 파일 로드 성공
- [ ] 페이지 수 정확히 추출
- [ ] 각 페이지가 개별 PDF로 분할됨
- [ ] 분할된 PDF가 메모리에 정상 저장됨
- [ ] 에러 케이스 처리 정상 작동
- [ ] 콘솔에 처리 결과 로그 출력

---

### Phase 4: 상태 관리 및 화면 전환 구현
**목표**: 업로드 화면과 결과 화면 간 전환 로직 구현

#### 작업 항목
- [ ] React useState로 상태 관리 (업로드/처리완료 상태)
- [ ] 업로드 화면 컴포넌트
- [ ] 결과 화면 컴포넌트
- [ ] 화면 전환 로직 구현
- [ ] "새 파일 업로드" 버튼으로 초기화 기능

#### 테스트 방법
1. PDF 업로드 후 결과 화면으로 전환되는지 확인
2. 결과 화면에서 "새 파일 업로드" 클릭 시 업로드 화면으로 복귀 확인
3. URL이 변경되지 않는지 확인 (단일 페이지)

#### 체크리스트
- [ ] 업로드 완료 시 결과 화면으로 전환
- [ ] "새 파일 업로드" 버튼으로 업로드 화면 복귀
- [ ] URL 변경 없이 화면 전환 작동
- [ ] 상태 관리 정상 작동

---

### Phase 5: 결과 화면 UI 및 다운로드 기능 구현
**목표**: 분할된 PDF 목록 표시 및 개별 다운로드 기능

#### 작업 항목
- [ ] 원본 파일 정보 표시 (파일명, 페이지 수)
- [ ] 페이지 목록 UI 구현 (페이지 번호 표시)
- [ ] 각 페이지별 다운로드 버튼 구현
- [ ] Blob URL 생성 및 다운로드 트리거 함수
- [ ] 파일명 규칙 적용 (`원본파일명-page-{번호}.pdf`)

#### 테스트 방법
1. **정상 케이스**:
   - PDF 업로드 후 결과 화면에서 페이지 목록 확인
   - 각 페이지의 다운로드 버튼 클릭 → 파일 다운로드 확인
   - 다운로드된 파일명이 올바른 형식인지 확인
   - 다운로드된 PDF 파일이 정상적으로 열리는지 확인

2. **다양한 페이지 수 테스트**:
   - 1페이지 PDF → 1개 파일 다운로드 확인
   - 10페이지 PDF → 10개 파일 다운로드 확인

#### 체크리스트
- [ ] 원본 파일 정보 정상 표시
- [ ] 페이지 목록이 정상적으로 렌더링됨
- [ ] 각 페이지 다운로드 버튼 클릭 시 파일 다운로드
- [ ] 다운로드된 파일명 형식 정확 (`원본파일명-page-1.pdf`)
- [ ] 다운로드된 PDF 파일이 정상적으로 열림
- [ ] 모든 페이지 개별 다운로드 가능

---

### Phase 6: 로딩 상태 및 에러 처리 개선
**목표**: 사용자 경험 향상을 위한 피드백 및 에러 처리

#### 작업 항목
- [ ] PDF 처리 중 로딩 인디케이터 표시
- [ ] 로딩 중 UI 비활성화
- [ ] 에러 메시지 UI 컴포넌트
- [ ] 다양한 에러 케이스별 메시지 정의
- [ ] 에러 발생 시 재시도 옵션 제공

#### 테스트 방법
1. **로딩 상태**:
   - 대용량 PDF 업로드 시 로딩 인디케이터 표시 확인
   - 로딩 중 버튼 비활성화 확인

2. **에러 처리**:
   - 비PDF 파일 업로드 → 명확한 에러 메시지 확인
   - 손상된 PDF 업로드 → 적절한 에러 메시지 확인
   - 메모리 부족 시 → 안내 메시지 확인

#### 체크리스트
- [ ] PDF 처리 중 로딩 인디케이터 표시
- [ ] 로딩 중 사용자 입력 차단
- [ ] 각 에러 케이스별 명확한 메시지 표시
- [ ] 에러 발생 시 재시도 가능
- [ ] 사용자 친화적인 에러 메시지

---

### Phase 7: 스타일링 및 UI/UX 개선
**목표**: 최종 UI/UX 다듬기 및 반응형 최적화

#### 작업 항목
- [ ] 전체 디자인 일관성 확보
- [ ] 호버 효과 및 트랜지션 추가
- [ ] 모바일 화면 최적화
- [ ] 접근성 개선 (키보드 네비게이션)
- [ ] 애니메이션 효과 추가 (선택사항)

#### 테스트 방법
1. 다양한 디바이스에서 UI 확인
2. 키보드만으로 모든 기능 사용 가능한지 확인
3. 시각적 일관성 확인

#### 체크리스트
- [ ] 전체 디자인 일관성 확보
- [ ] 모바일/태블릿/데스크톱 모두 정상 작동
- [ ] 키보드 네비게이션 지원
- [ ] 시각적 피드백 (호버, 포커스) 정상 작동
- [ ] 사용자 경험 개선 완료

---

### Phase 8: 최종 테스트 및 버그 수정
**목표**: 전체 기능 통합 테스트 및 버그 수정

#### 작업 항목
- [ ] 전체 기능 통합 테스트
- [ ] 다양한 PDF 파일로 테스트 (다양한 크기, 페이지 수)
- [ ] 크로스 브라우저 테스트 (Chrome, Firefox, Safari, Edge)
- [ ] 성능 테스트 (50페이지, 100페이지)
- [ ] 발견된 버그 수정

#### 테스트 시나리오
1. **정상 케이스**:
   - [ ] 1페이지 PDF 업로드 및 다운로드
   - [ ] 10페이지 PDF 업로드 및 다운로드
   - [ ] 50페이지 PDF 업로드 및 다운로드
   - [ ] 100페이지 PDF 업로드 및 다운로드 (성능 확인)

2. **예외 케이스**:
   - [ ] 비PDF 파일 업로드
   - [ ] 손상된 PDF 파일 업로드
   - [ ] 빈 PDF 파일 업로드
   - [ ] 100MB 이상 파일 업로드

3. **크로스 브라우저**:
   - [ ] Chrome에서 정상 작동
   - [ ] Firefox에서 정상 작동
   - [ ] Safari에서 정상 작동
   - [ ] Edge에서 정상 작동

#### 체크리스트
- [ ] 모든 정상 케이스 테스트 통과
- [ ] 모든 예외 케이스 적절히 처리됨
- [ ] 주요 브라우저에서 정상 작동
- [ ] 성능 요구사항 충족 (50페이지 5초, 100페이지 10초)
- [ ] 발견된 모든 버그 수정 완료

---

### Phase 9: 향후 개선 사항 (선택)
**목표**: 추가 기능 구현

#### 작업 항목
- [ ] 페이지 썸네일 미리보기
- [ ] 일괄 다운로드 (ZIP 파일)
- [ ] 페이지 선택 다운로드 (체크박스)
- [ ] 처리 진행률 표시 (프로그레스 바)
- [ ] 다크 모드 지원

#### 테스트 방법
각 기능별로 개별 테스트 수행

#### 체크리스트
- [ ] 각 개선 사항별로 체크리스트 작성
- [ ] 기능별 테스트 완료

## 8. 예외 처리

### 8.1 파일 관련
- 비PDF 파일 업로드 시 에러 메시지
- 손상된 PDF 파일 처리
- 빈 PDF 파일 처리

### 8.2 메모리 관련
- 대용량 파일 처리 실패 시 안내 메시지
- 브라우저 메모리 부족 시 권장사항 안내

## 9. 테스트 시나리오

### 9.1 정상 케이스
- 1페이지 PDF 업로드 및 다운로드
- 10페이지 PDF 업로드 및 다운로드
- 50페이지 PDF 업로드 및 다운로드

### 9.2 예외 케이스
- 비PDF 파일 업로드
- 손상된 PDF 파일 업로드
- 매우 큰 PDF 파일 업로드 (100MB 이상)

## 10. 참고사항

- 모든 처리는 클라이언트에서 수행되므로 서버 비용 없음
- 개인정보 보호에 유리한 구조
- 오프라인 환경에서도 작동 가능 (초기 로드 후)

